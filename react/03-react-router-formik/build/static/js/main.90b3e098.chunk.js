(this["webpackJsonp03-react-router-formik"]=this["webpackJsonp03-react-router-formik"]||[]).push([[0],{14:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","age":24,"role":"admin","timestamp":1627934490151},{"id":2,"username":"test-user","age":18,"role":"user","timestamp":1627934784096}]')},15:function(e){e.exports=JSON.parse('[{"id":1,"name":"Neptune","temperature":-220,"isWater":true,"timestamp":1627934490151},{"id":2,"name":"Earth","temperature":8,"isWater":true,"timestamp":1627934490151}]')},40:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n(33),s=n.n(a),i=n(3),u=(n(40),n(16)),o="view",j="create",b="edit",l="clone",d=n(8),O=n(4),x=n(2),h=n.n(x),p=n(5),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},m=function(e){return function(){return++e}},v=function(){return Date.now()},g=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},w=n(14),k=m(w.length),N={getUsers:function(){return Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(1e3);case 2:return console.log("GET /users",w),e.abrupt("return",w);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(!(n=w.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:g(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return n=Object(O.a)(Object(O.a)({},e),{},{id:k(),timestamp:v()}),w.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(!~(n=w.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return w[n]=Object(O.a)(Object(O.a)({},e),{},{timestamp:v()}),console.log("PUT /users",w[n]),t.abrupt("return",w[n]);case 9:g(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(!~(n=w.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",w.splice(n,1));case 8:g(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},U=n(17),S="username",E="role",P="age",y=(r={},Object(U.a)(r,S,""),Object(U.a)(r,P,0),Object(U.a)(r,E,""),r),C=n(0);var T=function(e){var t=e.id,n=Object(i.i)().url,r=Object(i.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(C.jsxs)("div",{className:"Actions",children:[Object(C.jsx)("button",{onClick:c(o),children:"View"})," ",Object(C.jsx)("button",{onClick:c(b),children:"Edit"})," ",Object(C.jsx)("button",{onClick:c(l),children:"Clone"})]})};n(50);function I(e){return(e=String(e)).padStart(2,"0")}var A=function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(I(t.getMonth()+1),"-").concat(I(t.getDate())," ").concat(I(t.getHours()),":").concat(I(t.getMinutes()))};var q=function(e){var t=e.users,n=e.setUsers,r=Object(i.i)().url;return Object(c.useEffect)((function(){N.getUsers().then(n)}),[n]),Object(C.jsxs)("div",{className:"UsersTable",children:[Object(C.jsx)(d.b,{to:"".concat(r,"/user/").concat(j),children:"Create User"}),Object(C.jsxs)("table",{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"ID"}),Object(C.jsx)("th",{children:"Username"}),Object(C.jsx)("th",{children:"Age"}),Object(C.jsx)("th",{children:"Role"}),Object(C.jsx)("th",{children:"Last Updated At"}),Object(C.jsx)("th",{children:"Actions"})]})}),Object(C.jsx)("tbody",{children:t.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.id}),Object(C.jsx)("td",{children:e.username}),Object(C.jsx)("td",{children:e.age}),Object(C.jsx)("td",{children:e.role}),Object(C.jsx)("td",{children:A(e.timestamp)}),Object(C.jsx)("td",{children:Object(C.jsx)(T,{id:e.id})})]},e.id)}))})]})]})},D=n(27),V=n(9);n(51);var R=function(e){var t=e.name,n=e.label,r=e.validate,c=e.type,a=void 0===c?"text":c,s=e.disabled,i=void 0!==s&&s,o=e.required,j=e.checked,b=void 0!==j&&j,l=Object(V.e)({name:t,validate:function(e){return o&&""===e?"Required":"function"===typeof r?r(e):void 0}}),d=Object(u.a)(l,1)[0];return Object(C.jsxs)("div",{className:"Input",children:[Object(C.jsxs)("label",{children:[Object(C.jsxs)("div",{children:[n,o&&"*"]}),Object(C.jsx)("input",Object(O.a)(Object(O.a)({type:a,disabled:i},d),{},{checked:b}))]}),Object(C.jsx)(V.a,{name:t,className:"error",component:"div"})]})};var W=function(e){var t=e.mode,n=Object(i.g)(),r=Object(V.f)(),c=r.values,a=r.isSubmitting;return Object(C.jsxs)("div",{children:[(t===j||t===b||t===l)&&Object(C.jsx)("button",{type:"submit",disabled:a,children:"Save"}),t===b&&Object(C.jsx)("button",{type:"reset",onClick:Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c,e.next=4,N.deleteUser(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),window.alert(e.t0.message);case 9:n.push("/users");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Delete"}),Object(C.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},children:"Cancel"})]})};var F=function(e){var t=e.label,n=e.name,r=e.disabled,c=e.validate,a=e.options,s=e.required,i=Object(V.e)({name:n,validate:function(e){return s&&""===e?"Required":"function"===typeof c?c(e):void 0}}),o=Object(u.a)(i,1)[0];return Object(C.jsxs)("div",{className:"Select",children:[Object(C.jsxs)("label",{children:[Object(C.jsxs)("div",{children:[t,s&&"*"]}),Object(C.jsx)("select",Object(O.a)(Object(O.a)({disabled:r},o),{},{children:a.map((function(e,t){return Object(C.jsx)("option",{label:e.label,children:e.value},t)}))}))]}),Object(C.jsx)(V.a,{name:n,className:"error",component:"div"})]})};var G=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles;return Object(C.jsx)(V.d,{initialValues:t,onSubmit:n,children:Object(C.jsxs)(V.c,{children:[Object(C.jsx)(R,{name:S,label:"Username",disabled:r===o,required:!0}),Object(C.jsx)(R,{name:P,type:"number",label:"Age",disabled:r===o,required:!0,validate:function(e){if(e<16||e>110)return"Age is not appropriate"}}),Object(C.jsx)(F,{label:"Role",name:E,disabled:r===o,options:c.map((function(e){return{label:e,value:e}}))}),Object(C.jsx)("br",{}),Object(C.jsx)(W,{mode:r})]})})};var J=function(e){var t=e.users,n=e.setUsers,r=Object(i.h)(),a=r.mode,s=r.id,d=Object(i.g)(),x=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==o&&a!==b&&a!==l||x||N.getUser(Number(s)).then((function(e){return n((function(t){return[].concat(Object(D.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,x,n]);var f=Object(c.useState)([]),m=Object(u.a)(f,2),v=m[0],g=m[1];Object(c.useEffect)((function(){N.getRoles().then(g)}),[n]);var w=function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=a,e.next=e.t0===j||e.t0===l?6:e.t0===b?9:12;break;case 6:return e.next=8,N.createUser(n);case 8:return e.abrupt("break",13);case 9:return e.next=11,N.editUser(n);case 11:return e.abrupt("break",13);case 12:console.error("Failed to execute this request for ".concat(a," mode"));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),window.alert(e.t1.message);case 18:d.push("/users");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e?Object(O.a)({},e):y}(x);return Object(C.jsx)(G,{initialValues:k,onSubmit:w,mode:a,roles:v},"".concat(a,":").concat(k.id))};n(52);var L=function(){return Object(C.jsxs)("div",{className:"NotFound",children:[Object(C.jsx)("h1",{children:"Not Found"}),Object(C.jsx)("p",{children:"404"})]})};var M=function(){var e=Object(i.i)().path,t=Object(c.useState)([]),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(C.jsx)("div",{className:"users",children:Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{exact:!0,path:e,children:Object(C.jsx)(q,{users:r,setUsers:a})}),Object(C.jsx)(i.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(o,"|").concat(j,"|").concat(b,"|").concat(l,")/:id?"),children:Object(C.jsx)(J,{users:r,setUsers:a})}),Object(C.jsx)(i.b,{children:Object(C.jsx)(L,{})})]})})};n(53);var B,H=function(){return Object(C.jsx)("nav",{className:"Sidebar",children:Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(d.c,{className:"Item",activeClassName:"Active",to:"/users",children:"Users"})}),Object(C.jsx)("li",{children:Object(C.jsx)(d.c,{className:"Item",activeClassName:"Active",to:"/planets",children:"Planets"})})]})})},Y=n(15),z=m(Y.length),K={getPlanets:function(){return Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(1e3);case 2:return console.log("GET /products",Y),e.abrupt("return",Y);case 4:case"end":return e.stop()}}),e)})))()},getPlanet:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(1e3);case 2:if(!(n=Y.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:g(e);case 9:case"end":return t.stop()}}),t)})))()},createPlanet:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return n=Object(O.a)(Object(O.a)({},e),{},{id:z(),timestamp:v()}),Y.push(n),console.log("POST /planets",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editPlanet:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(!~(n=Y.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return Y[n]=Object(O.a)(Object(O.a)({},e),{},{timestamp:v()}),console.log("PUT /planets",Y[n]),t.abrupt("return",Y[n]);case 9:g(e.id);case 10:case"end":return t.stop()}}),t)})))()},deletePlanet:function(e){return Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(!~(n=Y.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /planets",e),t.abrupt("return",Y.splice(n,1));case 8:g(e.id);case 9:case"end":return t.stop()}}),t)})))()}},Q="name",X="temperature",Z="isWater",$=(B={},Object(U.a)(B,Q,""),Object(U.a)(B,X,""),Object(U.a)(B,Z,!1),B);var _=function(e){var t=e.id,n=Object(i.i)().url,r=Object(i.g)(),c=function(e){return function(){r.push("".concat(n,"/planet/").concat(e,"/").concat(t))}};return Object(C.jsxs)("div",{className:"Actions",children:[Object(C.jsx)("button",{onClick:c(o),children:"View"})," ",Object(C.jsx)("button",{onClick:c(b),children:"Edit"})," ",Object(C.jsx)("button",{onClick:c(l),children:"Clone"})]})};n(54);var ee=function(e){var t=e.planets,n=e.setPlanets,r=Object(i.i)().url;return Object(c.useEffect)((function(){K.getPlanets().then(n)}),[n]),Object(C.jsxs)("div",{className:"ProductsTable",children:[Object(C.jsx)(d.b,{to:"".concat(r,"/planet/").concat(j),children:"Create product"}),Object(C.jsxs)("table",{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"ID"}),Object(C.jsx)("th",{children:"Name"}),Object(C.jsx)("th",{children:"Temperature"}),Object(C.jsx)("th",{children:"IsWater"}),Object(C.jsx)("th",{children:"Last Updated At"}),Object(C.jsx)("th",{children:"Actions"})]})}),Object(C.jsx)("tbody",{children:t.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.id}),Object(C.jsx)("td",{children:e.name}),Object(C.jsx)("td",{children:e.temperature}),Object(C.jsx)("td",{children:Number(e.isWater)}),Object(C.jsx)("td",{children:A(e.timestamp)}),Object(C.jsx)("td",{children:Object(C.jsx)(_,{id:e.id})})]},e.id)}))})]})]})};var te=function(e){var t=e.mode,n=Object(i.g)(),r=Object(V.f)(),c=r.values,a=r.isSubmitting;return Object(C.jsxs)("div",{children:[(t===j||t===b||t===l)&&Object(C.jsx)("button",{type:"submit",disabled:a,children:"Save"}),t===b&&Object(C.jsx)("button",{type:"reset",onClick:Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c,e.next=4,K.deletePlanet(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),window.alert(e.t0.message);case 9:n.push("/planets");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Delete"}),Object(C.jsx)("button",{type:"button",onClick:function(){return n.push("/planets")},children:"Cancel"})]})};n(55);var ne=function(e){var t=e.name,n=e.label,r=e.validate,c=e.disabled;return Object(C.jsx)("div",{className:"Checkbox",children:Object(C.jsxs)("label",{children:[Object(C.jsx)("span",{children:n})," ",Object(C.jsx)(V.b,{type:"checkbox",name:t,validate:r,disabled:c})]})})};var re=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode;return Object(C.jsx)(V.d,{initialValues:t,onSubmit:n,children:Object(C.jsxs)(V.c,{children:[Object(C.jsx)(R,{name:Q,label:"Name",disabled:r===o,required:!0}),Object(C.jsx)(R,{name:X,type:"number",label:"Temperature",disabled:r===o,required:!0}),Object(C.jsx)(ne,{name:Z,label:"IsWater",disabled:r===o}),Object(C.jsx)("br",{}),Object(C.jsx)(te,{mode:r})]})})};var ce=function(e){var t=e.planets,n=e.setPlanets,r=Object(i.h)(),a=r.mode,s=r.id,u=Object(i.g)(),d=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==o&&a!==b&&a!==l||d||K.getPlanet(Number(s)).then((function(e){return n((function(t){return[].concat(Object(D.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,d,n]);var x=function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,console.log(t),e.t0=a,e.next=e.t0===j||e.t0===l?6:e.t0===b?9:12;break;case 6:return e.next=8,K.createPlanet(n);case 8:return e.abrupt("break",13);case 9:return e.next=11,K.editPlanet(n);case 11:return e.abrupt("break",13);case 12:console.error("Failed to execute this request for ".concat(a," mode"));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),window.alert(e.t1.message);case 18:u.push("/planets");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return e?Object(O.a)(Object(O.a)({},e),{},{temperature:+e.temperature}):$}(d);return Object(C.jsx)(re,{initialValues:f,onSubmit:x,mode:a},"".concat(a,":").concat(f.id))};var ae=function(){var e=Object(i.i)().path,t=Object(c.useState)([]),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(C.jsx)("div",{className:"products",children:Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{exact:!0,path:e,children:Object(C.jsx)(ee,{planets:r,setPlanets:a})}),Object(C.jsx)(i.b,{exact:!0,path:"".concat(e,"/planet/:mode(").concat(o,"|").concat(j,"|").concat(b,"|").concat(l,")/:id?"),children:Object(C.jsx)(ce,{planets:r,setPlanets:a})}),Object(C.jsx)(i.b,{children:Object(C.jsx)(L,{})})]})})};var se=function(){return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(H,{}),Object(C.jsx)("div",{className:"content",children:Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.a,{exact:!0,from:"/",to:"/users"}),Object(C.jsx)(i.b,{path:"/users",children:Object(C.jsx)(M,{})}),Object(C.jsx)(i.b,{path:"/planets",children:Object(C.jsx)(ae,{})}),Object(C.jsx)(i.b,{children:Object(C.jsx)(L,{})})]})})]})};var ie=function(e){var t=e.children;return Object(C.jsx)(d.a,{basename:"/globallogic-js-basecamp-2021/react/03-react-router-formik/build",children:t})},ue=(n(56),document.getElementById("root"));s.a.render(Object(C.jsx)(c.StrictMode,{children:Object(C.jsx)(ie,{children:Object(C.jsx)(se,{})})}),ue)}},[[57,1,2]]]);
//# sourceMappingURL=main.90b3e098.chunk.js.map