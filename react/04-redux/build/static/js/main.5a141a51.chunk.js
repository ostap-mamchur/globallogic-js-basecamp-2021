(this["webpackJsonp03-react-router-formik"]=this["webpackJsonp03-react-router-formik"]||[]).push([[0],{17:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","age":24,"role":"admin","timestamp":1627934490151},{"id":2,"username":"test-user","age":18,"role":"user","timestamp":1627934784096}]')},29:function(e,t,r){e.exports={todoText:"AddTodoForm_todoText__1KA1a"}},38:function(e,t,r){e.exports={item:"TodoItem_item__OOnw9"}},39:function(e,t,r){e.exports={list:"TodoList_list__3myWl"}},40:function(e,t,r){e.exports={todos:"Todos_todos__2cKV_"}},47:function(e,t,r){},56:function(e,t,r){},59:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var n,c=r(0),s=r(25),a=r.n(s),i=r(5),o=(r(47),"view"),u="create",d="edit",l="clone",j=r(15),b=r(8),f="username",O="role",x="age",p=(n={},Object(b.a)(n,f,""),Object(b.a)(n,x,0),Object(b.a)(n,O,"user"),n),h=r(1);var m=function(e){var t=e.id,r=Object(i.i)().url,n=Object(i.g)(),c=function(e){return function(){n.push("".concat(r,"/user/").concat(e,"/").concat(t))}};return Object(h.jsxs)("div",{className:"Actions",children:[Object(h.jsx)("button",{onClick:c(o),children:"View"})," ",Object(h.jsx)("button",{onClick:c(d),children:"Edit"})," ",Object(h.jsx)("button",{onClick:c(l),children:"Clone"})]})},v=(r(56),r(9));function g(e){return(e=String(e)).padStart(2,"0")}var w,k,y=function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(g(t.getMonth()+1),"-").concat(g(t.getDate())," ").concat(g(t.getHours()),":").concat(g(t.getMinutes()))},N=r(4),T=r(2),U=r.n(T),C=r(7),S=r(10),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},A=function(){return Date.now()},E=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},R=r(17),I=(w=R.length,function(){return++w}),D={getUsers:function(){return Object(C.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(1e3);case 2:return console.log("GET /users",R),e.abrupt("return",R);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(C.a)(U.a.mark((function t(){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!(r=R.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(r.id),r),t.abrupt("return",r);case 8:E(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(C.a)(U.a.mark((function t(){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:return r=Object(v.a)(Object(v.a)({},e),{},{id:I(),timestamp:A()}),R.push(r),console.log("POST /users",r),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(C.a)(U.a.mark((function t(){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!~(r=R.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return R[r]=Object(v.a)(Object(v.a)({},e),{},{timestamp:A()}),console.log("PUT /users",R[r]),t.abrupt("return",R[r]);case 9:E(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(C.a)(U.a.mark((function t(){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!~(r=R.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",R[r]);case 8:E(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(C.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},q=Object(S.b)("users/fetchUsers",Object(C.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getUsers();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),L=Object(S.b)("users/fetchUser",function(){var e=Object(C.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getUser(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(S.b)("users/addNewUser",function(){var e=Object(C.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.createUser(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=Object(S.b)("users/updateUser",function(){var e=Object(C.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.editUser(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(S.b)("users/deleteUser",function(){var e=Object(C.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.deleteUser(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(S.c)({name:"users",initialState:{users:[],status:"idle",error:null},reducers:{},extraReducers:(k={},Object(b.a)(k,q.pending,(function(e,t){e.status="loading"})),Object(b.a)(k,q.fulfilled,(function(e,t){e.status="succeeded",e.users=e.users.concat(t.payload)})),Object(b.a)(k,q.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(b.a)(k,F.fulfilled,(function(e,t){e.users.push(t.payload)})),Object(b.a)(k,V.fulfilled,(function(e,t){var r=t.payload,n=r.id,c=r.username,s=r.age,a=r.role,i=r.timestamp,o=e.users.find((function(e){return e.id==n}));o&&(o.username=c,o.age=s,o.role=a,o.timestamp=i)})),Object(b.a)(k,G.fulfilled,(function(e,t){var r=t.payload.id;e.users=e.users.filter((function(e){return e.id!==r}))})),k)}).reducer,M=r.p+"static/media/spinning-circles.cff806a7.svg";r(59);var P=function(){return Object(h.jsx)("div",{className:"Loading-Container",children:Object(h.jsx)("img",{className:"Loading",src:M,alt:"Loading..."})})};var B=function(){var e,t=Object(N.b)(),r=Object(N.c)((function(e){return e.users.users})),n=Object(i.i)().url,s=Object(N.c)((function(e){return e.users.status})),a=Object(N.c)((function(e){return e.users.error}));return Object(c.useEffect)((function(){"idle"===s&&t(q())}),[s,t]),"loading"===s?e=Object(h.jsx)(P,{}):"succeeded"===s?e=Object(h.jsxs)("div",{className:"UsersTable",children:[Object(h.jsx)(j.b,{to:"".concat(n,"/user/").concat(u),children:"Create User"}),Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"ID"}),Object(h.jsx)("th",{children:"Username"}),Object(h.jsx)("th",{children:"Age"}),Object(h.jsx)("th",{children:"Role"}),Object(h.jsx)("th",{children:"Last Updated At"}),Object(h.jsx)("th",{children:"Actions"})]})}),Object(h.jsx)("tbody",{children:r.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.age}),Object(h.jsx)("td",{children:e.role}),Object(h.jsx)("td",{children:y(e.timestamp)}),Object(h.jsx)("td",{children:Object(h.jsx)(m,{id:e.id})})]},e.id)}))})]})]}):"failed"===s&&(e=Object(h.jsx)("div",{children:a})),Object(h.jsx)("div",{className:"Users",children:e})},K=r(18),H=r(23);r(60);var W=function(e){var t=e.name,r=e.label,n=e.validate,c=e.type,s=void 0===c?"text":c,a=e.disabled,i=void 0!==a&&a,o=e.required,u=e.checked,d=void 0!==u&&u,l=Object(K.d)({name:t,validate:function(e){return o&&""===e?"Required":"function"===typeof n?n(e):void 0}}),j=Object(H.a)(l,1)[0];return Object(h.jsxs)("div",{className:"Input",children:[Object(h.jsxs)("label",{children:[Object(h.jsxs)("div",{children:[r,o&&"*"]}),Object(h.jsx)("input",Object(v.a)(Object(v.a)({type:s,disabled:i},j),{},{checked:d}))]}),Object(h.jsx)(K.a,{name:t,className:"error",component:"div"})]})};var Y=function(e){var t=e.mode,r=Object(i.g)(),n=Object(K.e)(),c=n.values,s=n.isSubmitting,a=Object(N.b)();return Object(h.jsxs)("div",{children:[(t===u||t===d||t===l)&&Object(h.jsx)("button",{type:"submit",disabled:s,children:"Save"}),t===d&&Object(h.jsx)("button",{type:"reset",onClick:Object(C.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c,e.next=4,a(G(t));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),window.alert(e.t0.message);case 9:r.push("/users");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Delete"}),Object(h.jsx)("button",{type:"button",onClick:function(){return r.push("/users")},children:"Cancel"})]})};var z=function(e){var t=e.label,r=e.name,n=e.disabled,c=e.validate,s=e.options,a=e.required,i=Object(K.d)({name:r,validate:function(e){return a&&""===e?"Required":"function"===typeof c?c(e):void 0}}),o=Object(H.a)(i,1)[0];return Object(h.jsxs)("div",{className:"Select",children:[Object(h.jsxs)("label",{children:[Object(h.jsxs)("div",{children:[t,a&&"*"]}),Object(h.jsx)("select",Object(v.a)(Object(v.a)({disabled:n},o),{},{children:s.map((function(e,t){return Object(h.jsx)("option",{label:e.label,children:e.value},t)}))}))]}),Object(h.jsx)(K.a,{name:r,className:"error",component:"div"})]})},Q=r.p+"static/media/circles.ff85086e.svg";var X,Z=function(e){var t,r=e.initialValues,n=e.onSubmit,c=e.mode,s=Object(N.c)((function(e){return e.roles.roles})),a=Object(N.c)((function(e){return e.roles.status}));return"loading"===a?t=Object(h.jsx)("img",{src:Q,alt:"Loading.."}):"succeeded"===a&&(t=Object(h.jsx)(z,{label:"Role",name:O,disabled:c===o,options:s.map((function(e){return{label:e,value:e}}))})),Object(h.jsx)(K.c,{initialValues:r,onSubmit:n,children:Object(h.jsxs)(K.b,{children:[Object(h.jsx)(W,{name:f,label:"Username",disabled:c===o,required:!0}),Object(h.jsx)(W,{name:x,type:"number",label:"Age",disabled:c===o,required:!0,validate:function(e){if(e<16||e>110)return"Age is not appropriate"}}),t,Object(h.jsx)("br",{}),Object(h.jsx)(Y,{mode:c})]})})},$=Object(S.b)("roles/fetchRoles",Object(C.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getRoles();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),ee=Object(S.c)({name:"roles",initialState:{roles:[],status:"idle",error:null},reducers:{},extraReducers:(X={},Object(b.a)(X,$.pending,(function(e,t){e.status="loading"})),Object(b.a)(X,$.fulfilled,(function(e,t){e.status="succeeded",e.roles=e.roles.concat(t.payload)})),X)}).reducer;var te=function(){var e=Object(i.h)(),t=e.mode,r=e.id,n=Object(i.g)(),s=Object(N.b)(),a=Object(N.c)((function(e){return e.users.users.find((function(e){return e.id==r}))}));Object(c.useEffect)((function(){t!==o&&t!==d&&t!==l||a||s(L(r))}),[r,t,a,s]);var j=Object(N.c)((function(e){return e.roles.roles})),b=Object(N.c)((function(e){return e.roles.status}));Object(c.useEffect)((function(){"idle"===b&&s($())}),[s,j]);var f=function(){var e=Object(C.a)(U.a.mark((function e(r){var c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=r,e.t0=t,e.next=e.t0===u||e.t0===l?6:e.t0===d?9:12;break;case 6:return e.next=8,s(F(c));case 8:return e.abrupt("break",13);case 9:return e.next=11,s(V(c));case 11:return e.abrupt("break",13);case 12:console.error("Failed to execute this request for ".concat(t," mode"));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),window.alert(e.t1.message);case 18:n.push("/users");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return e?Object(v.a)({},e):p}(a);return Object(h.jsx)(Z,{initialValues:O,onSubmit:f,mode:t},"".concat(t,":").concat(O.id))};r(61);var re=function(){return Object(h.jsxs)("div",{className:"NotFound",children:[Object(h.jsx)("h1",{children:"Not Found"}),Object(h.jsx)("p",{children:"404"})]})};var ne=function(){var e=Object(i.i)().path;return Object(h.jsx)("div",{className:"users",children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:e,children:Object(h.jsx)(B,{})}),Object(h.jsx)(i.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(o,"|").concat(u,"|").concat(d,"|").concat(l,")/:id?"),children:Object(h.jsx)(te,{})}),Object(h.jsx)(i.b,{children:Object(h.jsx)(re,{})})]})})};r(62);var ce=function(){return Object(h.jsx)("nav",{className:"Sidebar",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(j.c,{className:"Item",activeClassName:"Active",to:"/users",children:"Users"})}),Object(h.jsx)("li",{children:Object(h.jsx)(j.c,{className:"Item",activeClassName:"Active",to:"/todos",children:"Todos"})})]})})},se=Object(S.c)({name:"todos",initialState:{todos:[]},reducers:{addTodo:function(e,t){e.todos.push({id:Object(S.d)(),text:t.payload.text,isComleted:!1})},removeTodo:function(e,t){e.todos=e.todos.filter((function(e){return e.id!=t.payload.id}))},toggleTodo:function(e,t){var r=e.todos.find((function(e){return e.id==t.payload.id}));r.isComleted=!r.isComleted}}}),ae=se.reducer,ie=se.actions,oe=ie.addTodo,ue=ie.removeTodo,de=ie.toggleTodo,le=function(e){return e.todos.todos},je=r(38),be=r.n(je);var fe=function(e){var t=e.text,r=e.id,n=e.isComleted,c=Object(N.b)();return Object(h.jsxs)("li",{className:be.a.item,children:[Object(h.jsx)("p",{onClick:function(e){c(de({id:r}))},style:{textDecoration:n?"line-through":"auto"},children:t}),Object(h.jsx)("button",{onClick:function(e){c(ue({id:r}))},children:"delete"})]})},Oe=r(39),xe=r.n(Oe);var pe=function(){var e=Object(N.c)(le).map((function(e){return Object(h.jsx)(fe,Object(v.a)({},e),e.id)}));return Object(h.jsx)("ul",{className:xe.a.list,children:e})},he=r(29),me=r.n(he);var ve=function(){var e=Object(c.useState)(""),t=Object(H.a)(e,2),r=t[0],n=t[1],s=Object(N.b)(),a=Boolean(r);return Object(h.jsxs)("div",{className:me.a.formContainer,children:[Object(h.jsx)("h2",{children:"Add a new todo"}),Object(h.jsxs)("form",{className:me.a.form,children:[Object(h.jsx)("label",{htmlFor:"todoText",children:"Todo text:"}),Object(h.jsx)("div",{children:Object(h.jsx)("textarea",{className:me.a.todoText,name:"todoText",id:"todoText",onChange:function(e){return n(e.target.value)},value:r,cols:"30",rows:"1"})}),Object(h.jsx)("button",{onClick:function(e){s(oe({text:r})),n("")},type:"button",disabled:!a,children:"Save todo"})]})]})},ge=r(40),we=r.n(ge);var ke=function(){return Object(h.jsxs)("div",{className:we.a.todos,children:[Object(h.jsx)(ve,{}),Object(h.jsx)(pe,{})]})};var ye=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(ce,{}),Object(h.jsx)("div",{className:"content",children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.a,{exact:!0,from:"/",to:"/users"}),Object(h.jsx)(i.b,{path:"/users",children:Object(h.jsx)(ne,{})}),Object(h.jsx)(i.b,{path:"/todos",children:Object(h.jsx)(ke,{})}),Object(h.jsx)(i.b,{children:Object(h.jsx)(re,{})})]})})]})};var Ne=function(e){var t=e.children;return Object(h.jsx)(j.a,{basename:"/globallogic-js-basecamp-2021/react/03-react-router-formik/build",children:t})},Te=(r(63),r(42)),Ue=Object(S.a)({reducer:{todos:ae,users:J,roles:ee},middleware:function(e){return e().concat(Te.a)}}),Ce=document.getElementById("root");a.a.render(Object(h.jsx)(c.StrictMode,{children:Object(h.jsx)(Ne,{children:Object(h.jsx)(N.a,{store:Ue,children:Object(h.jsx)(ye,{})})})}),Ce)}},[[64,1,2]]]);
//# sourceMappingURL=main.5a141a51.chunk.js.map